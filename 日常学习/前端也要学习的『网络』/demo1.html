<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- <iframe id="myIframe" src="./index2.html "></iframe> -->
    <!--  <script type="text/javascript">
      document.domain = "www.test.com";
      window.name = "indexHTMLName";
    </script> -->

    <script>
      // 假设当前页面是 test.plusplus.com/demo1.html
      // 需要请求的接口是 test2.plusplus.com/demo2.php

      // ## window.name
      var flag = false;
      var iframe = document.createElement("iframe");
      iframe.src = "test2.plusplus.com/demo2.html";
      var getDatas = function () {
        if (flag) {
          var data = iframe.contentWindow.name;
          console.log(data);
        } else {
          flag = true;
          setTimeout(function () {
            iframe.contentWindow.location.href =
              "test2.plusplus.com/demo3.html";
          }, 500);
        }
      };
      iframe.onload = getDatas;
      document.body.appendChild(iframe);

      // ## postMessage
      //  <iframe src="test2.plusplus.com/demo2.html"></iframe>
      // 等待接收数据
      window.onmessage = function (e) {
        var e = e || window.event;
        console.log(e.data);
      };
    </script>
  </body>
</html>
